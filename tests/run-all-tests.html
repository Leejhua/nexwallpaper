<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labubu Gallery æµ‹è¯•å¥—ä»¶</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .test-section h2 {
            color: #495057;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .test-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        
        .results {
            margin-top: 20px;
            padding: 15px;
            background: #fff;
            border-radius: 6px;
            border-left: 4px solid #28a745;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .results.error {
            border-left-color: #dc3545;
        }
        
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .status.running {
            background: #ffc107;
            color: #212529;
        }
        
        .status.success {
            background: #28a745;
            color: white;
        }
        
        .status.error {
            background: #dc3545;
            color: white;
        }
        
        .device-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .device-info h3 {
            margin-top: 0;
            color: #495057;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .info-item {
            background: white;
            padding: 10px;
            border-radius: 4px;
            border-left: 3px solid #007bff;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .test-button {
                width: 100%;
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ° Labubu Gallery æµ‹è¯•å¥—ä»¶</h1>
        
        <!-- è®¾å¤‡ä¿¡æ¯ -->
        <div class="device-info">
            <h3>ğŸ“± å½“å‰è®¾å¤‡ä¿¡æ¯</h3>
            <div class="info-grid">
                <div class="info-item">
                    <strong>è®¾å¤‡ç±»å‹:</strong> <span id="deviceType"></span>
                </div>
                <div class="info-item">
                    <strong>å±å¹•å°ºå¯¸:</strong> <span id="screenSize"></span>
                </div>
                <div class="info-item">
                    <strong>æµè§ˆå™¨:</strong> <span id="browser"></span>
                </div>
                <div class="info-item">
                    <strong>ç”¨æˆ·ä»£ç†:</strong> <span id="userAgent"></span>
                </div>
            </div>
        </div>
        
        <!-- ç»¼åˆæµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸ”„ ç»¼åˆæµ‹è¯•</h2>
            <p>è¿è¡Œæ‰€æœ‰è®¾å¤‡çš„å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ŒåŒ…æ‹¬å“åº”å¼å¸ƒå±€ã€åŠŸèƒ½æµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ã€‚</p>
            <button class="test-button" onclick="runComprehensiveTest()">
                è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
            </button>
            <span id="comprehensive-status"></span>
            <div class="progress-bar">
                <div class="progress-fill" id="comprehensive-progress"></div>
            </div>
            <div id="comprehensive-results" class="results" style="display: none;"></div>
        </div>
        
        <!-- æ¡Œé¢ç«¯æµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸ–¥ï¸ æ¡Œé¢ç«¯ä¸“é¡¹æµ‹è¯•</h2>
            <p>æµ‹è¯•æ¡Œé¢ç«¯ç‰¹æœ‰åŠŸèƒ½ï¼šé”®ç›˜å¿«æ·é”®ã€é¼ æ ‡æ‚¬åœã€å³é”®èœå•ã€å¤šçª—å£æ”¯æŒç­‰ã€‚</p>
            <button class="test-button" onclick="runDesktopTest()">
                è¿è¡Œæ¡Œé¢ç«¯æµ‹è¯•
            </button>
            <span id="desktop-status"></span>
            <div id="desktop-results" class="results" style="display: none;"></div>
        </div>
        
        <!-- ç§»åŠ¨ç«¯æµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸ“± ç§»åŠ¨ç«¯ä¸“é¡¹æµ‹è¯•</h2>
            <p>æµ‹è¯•ç§»åŠ¨ç«¯ç‰¹æœ‰åŠŸèƒ½ï¼šè§¦æ‘¸æ“ä½œã€æ‰‹åŠ¿è¯†åˆ«ã€è™šæ‹Ÿé”®ç›˜ã€ç§»åŠ¨ç«¯å¸ƒå±€ç­‰ã€‚</p>
            <button class="test-button" onclick="runMobileTest()">
                è¿è¡Œç§»åŠ¨ç«¯æµ‹è¯•
            </button>
            <span id="mobile-status"></span>
            <div id="mobile-results" class="results" style="display: none;"></div>
        </div>
        
        <!-- æ€§èƒ½æµ‹è¯• -->
        <div class="test-section">
            <h2>âš¡ æ€§èƒ½åŸºå‡†æµ‹è¯•</h2>
            <p>æµ‹è¯•åº”ç”¨æ€§èƒ½æŒ‡æ ‡ï¼šåŠ è½½æ—¶é—´ã€å†…å­˜ä½¿ç”¨ã€æ»šåŠ¨æµç•…åº¦ã€åŠ¨ç”»æ€§èƒ½ç­‰ã€‚</p>
            <button class="test-button" onclick="runPerformanceTest()">
                è¿è¡Œæ€§èƒ½æµ‹è¯•
            </button>
            <span id="performance-status"></span>
            <div id="performance-results" class="results" style="display: none;"></div>
        </div>
        
        <!-- åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸ”§ åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•</h2>
            <p>æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½ï¼šæœç´¢ã€ç­›é€‰ã€è¯¦æƒ…é¡µã€æ ‡ç­¾ç‚¹å‡»ã€æŒ‰é’®äº¤äº’ç­‰ã€‚</p>
            <button class="test-button" onclick="runFunctionalTest()">
                è¿è¡ŒåŠŸèƒ½æµ‹è¯•
            </button>
            <span id="functional-status"></span>
            <div id="functional-results" class="results" style="display: none;"></div>
        </div>
    </div>

    <!-- åŠ è½½æµ‹è¯•è„šæœ¬ -->
    <script src="desktop-mobile-test.js"></script>
    <script src="desktop-specific-test.js"></script>
    <script src="mobile-specific-test.js"></script>
    
    <script>
        // åˆå§‹åŒ–è®¾å¤‡ä¿¡æ¯
        function initDeviceInfo() {
            const deviceType = window.innerWidth > 768 ? 'ğŸ–¥ï¸ æ¡Œé¢ç«¯' : 'ğŸ“± ç§»åŠ¨ç«¯';
            const screenSize = `${window.innerWidth} Ã— ${window.innerHeight}`;
            const browser = getBrowserName();
            const userAgent = navigator.userAgent.substring(0, 50) + '...';
            
            document.getElementById('deviceType').textContent = deviceType;
            document.getElementById('screenSize').textContent = screenSize;
            document.getElementById('browser').textContent = browser;
            document.getElementById('userAgent').textContent = userAgent;
        }
        
        function getBrowserName() {
            const ua = navigator.userAgent;
            if (ua.includes('Chrome')) return 'Chrome';
            if (ua.includes('Firefox')) return 'Firefox';
            if (ua.includes('Safari')) return 'Safari';
            if (ua.includes('Edge')) return 'Edge';
            return 'Unknown';
        }
        
        // æ›´æ–°çŠ¶æ€
        function updateStatus(testType, status, message = '') {
            const statusElement = document.getElementById(`${testType}-status`);
            statusElement.className = `status ${status}`;
            
            switch (status) {
                case 'running':
                    statusElement.textContent = 'è¿è¡Œä¸­...';
                    break;
                case 'success':
                    statusElement.textContent = `âœ… å®Œæˆ ${message}`;
                    break;
                case 'error':
                    statusElement.textContent = `âŒ å¤±è´¥ ${message}`;
                    break;
            }
        }
        
        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress(testType, percentage) {
            const progressElement = document.getElementById(`${testType}-progress`);
            if (progressElement) {
                progressElement.style.width = `${percentage}%`;
            }
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResults(testType, results, isError = false) {
            const resultsElement = document.getElementById(`${testType}-results`);
            resultsElement.style.display = 'block';
            resultsElement.className = `results ${isError ? 'error' : ''}`;
            resultsElement.innerHTML = results;
        }
        
        // è¿è¡Œç»¼åˆæµ‹è¯•
        async function runComprehensiveTest() {
            updateStatus('comprehensive', 'running');
            updateProgress('comprehensive', 0);
            
            try {
                const testRunner = new ResponsiveTestRunner();
                let progress = 0;
                
                // æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°
                const progressInterval = setInterval(() => {
                    progress += 10;
                    updateProgress('comprehensive', Math.min(progress, 90));
                }, 500);
                
                const results = await testRunner.runAllTests();
                
                clearInterval(progressInterval);
                updateProgress('comprehensive', 100);
                
                const report = testRunner.generateReport();
                updateStatus('comprehensive', 'success', `(${report.overallPassRate}% é€šè¿‡)`);
                
                showResults('comprehensive', formatComprehensiveResults(report));
                
            } catch (error) {
                updateStatus('comprehensive', 'error', error.message);
                showResults('comprehensive', `é”™è¯¯: ${error.message}`, true);
            }
        }
        
        // è¿è¡Œæ¡Œé¢ç«¯æµ‹è¯•
        async function runDesktopTest() {
            updateStatus('desktop', 'running');
            
            try {
                const testRunner = new DesktopTestRunner();
                const results = await testRunner.runAllTests();
                const report = testRunner.generateReport();
                
                updateStatus('desktop', 'success', `(${report.passRate}% é€šè¿‡)`);
                showResults('desktop', formatTestResults(report.results));
                
            } catch (error) {
                updateStatus('desktop', 'error', error.message);
                showResults('desktop', `é”™è¯¯: ${error.message}`, true);
            }
        }
        
        // è¿è¡Œç§»åŠ¨ç«¯æµ‹è¯•
        async function runMobileTest() {
            updateStatus('mobile', 'running');
            
            try {
                const testRunner = new MobileTestRunner();
                const results = await testRunner.runAllTests();
                const report = testRunner.generateReport();
                
                updateStatus('mobile', 'success', `(${report.passRate}% é€šè¿‡)`);
                showResults('mobile', formatTestResults(report.results));
                
            } catch (error) {
                updateStatus('mobile', 'error', error.message);
                showResults('mobile', `é”™è¯¯: ${error.message}`, true);
            }
        }
        
        // è¿è¡Œæ€§èƒ½æµ‹è¯•
        async function runPerformanceTest() {
            updateStatus('performance', 'running');
            
            try {
                const results = await runPerformanceBenchmark();
                updateStatus('performance', 'success', '(åŸºå‡†æµ‹è¯•å®Œæˆ)');
                showResults('performance', formatPerformanceResults(results));
                
            } catch (error) {
                updateStatus('performance', 'error', error.message);
                showResults('performance', `é”™è¯¯: ${error.message}`, true);
            }
        }
        
        // è¿è¡ŒåŠŸèƒ½æµ‹è¯•
        async function runFunctionalTest() {
            updateStatus('functional', 'running');
            
            try {
                const results = await runFunctionalTests();
                updateStatus('functional', 'success', '(åŠŸèƒ½æµ‹è¯•å®Œæˆ)');
                showResults('functional', formatFunctionalResults(results));
                
            } catch (error) {
                updateStatus('functional', 'error', error.message);
                showResults('functional', `é”™è¯¯: ${error.message}`, true);
            }
        }
        
        // æ ¼å¼åŒ–ç»¼åˆæµ‹è¯•ç»“æœ
        function formatComprehensiveResults(report) {
            let html = '<h4>ğŸ“Š ç»¼åˆæµ‹è¯•æŠ¥å‘Š</h4>';
            
            Object.entries(report.deviceResults).forEach(([device, stats]) => {
                const total = stats.passed + stats.failed;
                const passRate = ((stats.passed / total) * 100).toFixed(1);
                
                html += `<div style="margin-bottom: 15px;">`;
                html += `<strong>${device}:</strong> ${stats.passed}/${total} é€šè¿‡ (${passRate}%)<br>`;
                
                if (stats.failed > 0) {
                    html += `<span style="color: #dc3545;">å¤±è´¥é¡¹ç›®:</span><br>`;
                    stats.tests.filter(t => !t.passed).forEach(test => {
                        html += `&nbsp;&nbsp;âŒ ${test.test}: ${test.details}<br>`;
                    });
                }
                
                html += `</div>`;
            });
            
            html += `<div style="border-top: 1px solid #dee2e6; padding-top: 10px; margin-top: 15px;">`;
            html += `<strong>æ€»ä½“ç»“æœ:</strong> ${report.totalPassed}/${report.totalTests} (${report.overallPassRate}%)`;
            html += `</div>`;
            
            return html;
        }
        
        // æ ¼å¼åŒ–æµ‹è¯•ç»“æœ
        function formatTestResults(results) {
            let html = '';
            results.forEach(result => {
                const status = result.passed ? 'âœ…' : 'âŒ';
                const color = result.passed ? '#28a745' : '#dc3545';
                html += `<div style="color: ${color}; margin-bottom: 5px;">`;
                html += `${status} ${result.test}: ${result.details}`;
                html += `</div>`;
            });
            return html;
        }
        
        // æ€§èƒ½åŸºå‡†æµ‹è¯•
        async function runPerformanceBenchmark() {
            const results = [];
            
            // é¡µé¢åŠ è½½æ—¶é—´
            const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
            results.push({ name: 'é¡µé¢åŠ è½½æ—¶é—´', value: `${loadTime}ms`, passed: loadTime < 3000 });
            
            // å†…å­˜ä½¿ç”¨
            if (performance.memory) {
                const memoryUsage = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024);
                results.push({ name: 'å†…å­˜ä½¿ç”¨', value: `${memoryUsage}MB`, passed: memoryUsage < 100 });
            }
            
            // DOMå…ƒç´ æ•°é‡
            const domElements = document.querySelectorAll('*').length;
            results.push({ name: 'DOMå…ƒç´ æ•°é‡', value: domElements, passed: domElements < 5000 });
            
            // å›¾ç‰‡æ•°é‡
            const images = document.querySelectorAll('img').length;
            results.push({ name: 'å›¾ç‰‡æ•°é‡', value: images, passed: images > 0 });
            
            return results;
        }
        
        // åŠŸèƒ½æµ‹è¯•
        async function runFunctionalTests() {
            const results = [];
            
            // æµ‹è¯•æœç´¢æ¡†å­˜åœ¨
            const searchInput = document.querySelector('input[type="text"]');
            results.push({ name: 'æœç´¢æ¡†', passed: !!searchInput });
            
            // æµ‹è¯•ç”»å»Šé¡¹ç›®å­˜åœ¨
            const galleryItems = document.querySelectorAll('.gallery-item, [class*="gallery-item"]');
            results.push({ name: 'ç”»å»Šé¡¹ç›®', passed: galleryItems.length > 0, count: galleryItems.length });
            
            // æµ‹è¯•ä¾§è¾¹æ å­˜åœ¨
            const sidebar = document.querySelector('.sidebar, [class*="sidebar"]');
            results.push({ name: 'ä¾§è¾¹æ ', passed: !!sidebar });
            
            // æµ‹è¯•æŒ‰é’®å­˜åœ¨
            const buttons = document.querySelectorAll('button');
            results.push({ name: 'äº¤äº’æŒ‰é’®', passed: buttons.length > 0, count: buttons.length });
            
            return results;
        }
        
        // æ ¼å¼åŒ–æ€§èƒ½ç»“æœ
        function formatPerformanceResults(results) {
            let html = '<h4>âš¡ æ€§èƒ½åŸºå‡†æŠ¥å‘Š</h4>';
            results.forEach(result => {
                const status = result.passed ? 'âœ…' : 'âŒ';
                const color = result.passed ? '#28a745' : '#dc3545';
                html += `<div style="color: ${color}; margin-bottom: 5px;">`;
                html += `${status} ${result.name}: ${result.value}`;
                html += `</div>`;
            });
            return html;
        }
        
        // æ ¼å¼åŒ–åŠŸèƒ½ç»“æœ
        function formatFunctionalResults(results) {
            let html = '<h4>ğŸ”§ åŠŸèƒ½å®Œæ•´æ€§æŠ¥å‘Š</h4>';
            results.forEach(result => {
                const status = result.passed ? 'âœ…' : 'âŒ';
                const color = result.passed ? '#28a745' : '#dc3545';
                const count = result.count ? ` (${result.count}ä¸ª)` : '';
                html += `<div style="color: ${color}; margin-bottom: 5px;">`;
                html += `${status} ${result.name}${count}`;
                html += `</div>`;
            });
            return html;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initDeviceInfo();
            
            // ç›‘å¬çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', initDeviceInfo);
            
            console.log('ğŸ§ª Labubu Gallery æµ‹è¯•å¥—ä»¶å·²åŠ è½½');
            console.log('ğŸ’¡ æ‚¨å¯ä»¥ç‚¹å‡»æŒ‰é’®è¿è¡Œæµ‹è¯•ï¼Œæˆ–åœ¨æ§åˆ¶å°ä¸­ç›´æ¥è°ƒç”¨æµ‹è¯•å‡½æ•°');
        });
    </script>
</body>
</html>
