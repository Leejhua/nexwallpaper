# 🧪 Labubu Gallery 测试套件

这是一个全面的测试套件，用于测试 Labubu Gallery React 应用的桌面端和移动端功能。

## 📋 测试概览

### 🎯 测试目标
- **响应式设计**: 确保在不同设备上的布局适配
- **功能完整性**: 验证所有核心功能正常工作
- **性能优化**: 检查应用性能指标
- **用户体验**: 测试交互流畅度和易用性

### 🔧 测试类型
1. **综合测试** - 跨设备的完整功能测试
2. **桌面端专项测试** - 桌面端特有功能测试
3. **移动端专项测试** - 移动端特有功能测试
4. **性能基准测试** - 应用性能指标测试
5. **功能完整性测试** - 核心功能验证测试

## 🚀 快速开始

### 方法一：使用测试脚本（推荐）

```bash
# 运行完整测试套件
./scripts/run-tests.sh

# 仅启动开发服务器
./scripts/run-tests.sh start

# 运行浏览器测试
./scripts/run-tests.sh browser

# 停止服务器
./scripts/run-tests.sh stop
```

### 方法二：手动运行

1. **启动开发服务器**
   ```bash
   npm run dev
   ```

2. **打开测试页面**
   - 主应用: http://localhost:3000
   - 测试套件: `tests/run-all-tests.html`

3. **在浏览器中运行测试**
   - 点击测试页面中的按钮
   - 或在控制台中运行测试函数

## 📱 测试功能详解

### 🖥️ 桌面端测试

#### 测试项目：
- ✅ **侧边栏显示** - 验证侧边栏默认可见且宽度合适
- ✅ **键盘快捷键** - 测试 ESC 关闭详情页、Ctrl+F 搜索聚焦
- ✅ **鼠标悬停效果** - 检查画廊项和按钮的悬停动画
- ✅ **右键菜单** - 测试自定义右键菜单功能
- ✅ **多窗口支持** - 验证 Ctrl+点击 和窗口焦点处理
- ✅ **桌面端布局** - 检查4列布局和响应式断点
- ✅ **桌面端性能** - 测试高帧率滚动和内存使用

#### 运行方式：
```javascript
// 在浏览器控制台中运行
runDesktopTests()
```

### 📱 移动端测试

#### 测试项目：
- ✅ **移动端侧边栏** - 测试菜单按钮和遮罩关闭
- ✅ **触摸滚动** - 验证触摸滑动和滚动响应
- ✅ **移动端详情页** - 检查32px按钮尺寸和图片缩放
- ✅ **移动端搜索** - 测试虚拟键盘触发和搜索功能
- ✅ **移动端手势** - 验证长按、下拉刷新等手势
- ✅ **移动端性能** - 测试30fps滚动和内存优化

#### 运行方式：
```javascript
// 在移动端浏览器控制台中运行
runMobileTests()
```

### 🔄 综合测试

#### 测试项目：
- ✅ **页面加载** - 验证HTTP状态和加载时间
- ✅ **响应式布局** - 测试不同尺寸下的布局适配
- ✅ **搜索功能** - 验证搜索输入和结果显示
- ✅ **筛选功能** - 测试分类筛选和多选功能
- ✅ **详情页功能** - 检查模态框打开和按钮交互
- ✅ **动画效果** - 验证BlurFade动画和悬停效果
- ✅ **性能指标** - 测试加载时间和内存使用

#### 运行方式：
```javascript
// 在浏览器控制台中运行
runResponsiveTests()
```

## 🎯 核心功能测试

### 🔍 搜索和筛选
- **搜索框功能** - 输入关键词搜索壁纸
- **分类筛选** - 按奇幻、桌面、手机等分类筛选
- **标签点击搜索** - 点击详情页标签自动搜索
- **搜索结果显示** - 验证搜索结果的准确性

### 🖼️ 详情页功能
- **模态框打开/关闭** - 点击壁纸打开详情页
- **按钮尺寸统一** - 桌面端40px，移动端32px
- **喜欢按钮** - 测试点击动画和状态切换
- **分享功能** - 验证分享模态框和选项
- **下载功能** - 测试高清图片下载
- **标签交互** - 点击标签触发搜索

### 🎨 视觉和动画
- **BlurFade动画** - MagicUI组件的淡入效果
- **悬停动画** - 鼠标悬停时的缩放效果
- **按钮反馈** - 点击时的缩放和颜色变化
- **加载动画** - 图片懒加载和占位符

## 📊 性能基准

### 🎯 性能指标
- **页面加载时间** < 3秒
- **首屏渲染时间** < 2秒
- **内存使用量** 
  - 桌面端 < 150MB
  - 移动端 < 50MB
- **滚动帧率**
  - 桌面端 ≥ 50 FPS
  - 移动端 ≥ 30 FPS

### 📈 通过率标准
- **优秀** ≥ 90%
- **良好** ≥ 80%
- **可接受** ≥ 70%

## 🛠️ 测试工具

### 📁 文件结构
```
tests/
├── desktop-mobile-test.js      # 综合响应式测试
├── desktop-specific-test.js    # 桌面端专项测试
├── mobile-specific-test.js     # 移动端专项测试
├── run-all-tests.html         # 测试套件界面
├── test-config.json           # 测试配置文件
└── README.md                  # 测试说明文档

scripts/
└── run-tests.sh               # 测试运行脚本
```

### 🔧 配置选项
测试配置在 `test-config.json` 中定义：
- **设备尺寸** - 移动端、平板端、桌面端
- **测试超时** - 默认10秒
- **重试次数** - 默认3次
- **选择器** - CSS选择器定义
- **测试数据** - 搜索词、分类等

## 🐛 故障排除

### 常见问题

1. **服务器启动失败**
   ```bash
   # 检查端口占用
   lsof -i :3000
   
   # 强制停止进程
   ./scripts/run-tests.sh stop
   ```

2. **测试脚本无法运行**
   ```bash
   # 确保脚本可执行
   chmod +x scripts/run-tests.sh
   
   # 检查Node.js版本
   node --version
   ```

3. **浏览器测试失败**
   - 确保浏览器支持ES6+
   - 检查控制台错误信息
   - 尝试刷新页面重新运行

### 调试技巧

1. **开启详细日志**
   ```javascript
   // 在控制台中设置调试模式
   localStorage.setItem('debug', 'true');
   ```

2. **单独运行测试**
   ```javascript
   // 运行特定测试
   const testRunner = new DesktopTestRunner();
   await testRunner.testKeyboardShortcuts();
   ```

3. **查看测试结果**
   ```javascript
   // 获取详细结果
   console.log(testRunner.results);
   ```

## 📝 贡献指南

### 添加新测试

1. **创建测试函数**
   ```javascript
   async testNewFeature() {
     try {
       // 测试逻辑
       const result = await someTest();
       this.logResult('新功能测试', result, '测试详情');
       return result;
     } catch (error) {
       this.logResult('新功能测试', false, error.message);
       return false;
     }
   }
   ```

2. **添加到测试套件**
   ```javascript
   async runAllTests() {
     // ... 其他测试
     await this.testNewFeature();
     // ...
   }
   ```

3. **更新配置文件**
   在 `test-config.json` 中添加相关配置。

### 测试最佳实践

1. **测试独立性** - 每个测试应该独立运行
2. **清理状态** - 测试后恢复初始状态
3. **错误处理** - 妥善处理异常情况
4. **详细日志** - 提供清晰的测试结果描述

## 📞 支持

如果您在使用测试套件时遇到问题：

1. 查看控制台错误信息
2. 检查 `test-config.json` 配置
3. 确保开发服务器正常运行
4. 尝试在不同浏览器中测试

---

**🎉 祝您测试愉快！**

这个测试套件将帮助您确保 Labubu Gallery 在各种设备和场景下都能提供优秀的用户体验。
