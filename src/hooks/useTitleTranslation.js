import { useCallback } from 'react';
import { useLanguage } from '../contexts/LanguageContext';

/**
 * 标题翻译Hook - 提供智能标题翻译功能
 */
export const useTitleTranslation = () => {
  const { t, currentLanguage } = useLanguage();

  // 常见词汇映射字典
  const vocabularyMap = {
    zh: {
      'Labubu': 'Labubu',
      'Hero Image': '英雄形象',
      'Pink Hoodie': '粉色连帽衫',
      'Cracked Wall': '破碎墙壁',
      'Live Wallpaper': '动态壁纸',
      'Brown Long Ears': '棕色长耳朵',
      'Side View': '侧视图',
      'Dark Brown Sitting': '深棕色坐着',
      'White Fluffy Forest': '白色毛茸茸森林',
      'Underwater Bubbles': '水下气泡',
      'with Swim Ring': '戴泳圈',
      'White Suit': '白色西装',
      'Flashlight': '手电筒',
      'Tablet': '平板',
      'Dynamic Lockscreen': '动态锁屏',
      'Static Lockscreen': '静态锁屏',
      'iPhone': 'iPhone',
      'Wallpaper': '壁纸',
      'video wallpaper': '视频壁纸',
      'Astronaut': '宇航员',
      'Colorful Suit': '彩色西装',
      'Pink Bow': '粉色蝴蝶结',
      'Pink Overalls': '粉色连体衣',
      'Violin': '小提琴',
      'White Astronaut': '白色宇航员',
      'Pool': '泳池',
      'Black Suit': '黑色西装',
      'Pool Ladder': '泳池梯',
      'Surfer Hat': '冲浪者草帽',
      'Green Frog': '绿色青蛙',
      'Floating': '漂浮',
      'Green Inner Tube': '绿色内胎',
      'Sunglasses': '太阳镜',
      'Orange Kayak': '橙色皮划艇',
      'Orange Fish Raft': '橙色鱼筏',
      'Two in Swimming Pool': '两个在游泳池',
      'Blue Swimmer Underwater': '蓝色游泳者水下',
      'Water Lily Pond': '睡莲池',
      'Baby Swim Ring': '婴儿游泳圈',
      'Friends Peeking': '朋友偷看',
      'Angel Playing Lute': '天使弹鲁特琴',
      'Black Angel Butterfly': '黑天使蝴蝶',
      'Rainbow Skull': '彩虹骷髅',
      'Fluffy White Sitting': '毛茸茸的白色坐着',
      'Spring Forest': '春日森林',
      'Rocking Horse Prince': '摇马王子',
      'Pink Spotlight': '粉色聚光灯',
      'Pink Ears': '粉色耳朵',
      'Gamer Monster': '游戏玩家怪物',
      'Floating Island': '浮岛',
      'Explorer White Outfit': '探险家白色服装',
      'Standing Beside Bed': '站床边',
      'Explorer': '探险家',
      'Colorful Hearts': '彩色爱心',
      'Classic Dark': '经典暗色',
      'Jellyfish': '水母'
    },
    en: {
      '在玫瑰园的石凳上': 'on Stone Bench in Rose Garden',
      '在月光草甸的被子上与流星': 'on Quilt in Moonlit Meadow with Meteors',
      '在森林空地的苔藓原木上': 'on Mossy Log in Forest Glade',
      '戴泳圈': 'with Swim Ring',
      '白色西装手电筒平板静态锁屏': 'White Suit Flashlight Tablet Static Lockscreen',
      '白色西装手电筒': 'White Suit Flashlight',
      '实时锁屏': 'Live Lockscreen',
      '白色毛茸茸森林': 'White Fluffy Forest',
      '水下气泡': 'Underwater Bubbles',
      '春日森林': 'Spring Forest',
      '穿着红白泳衣的': 'in Red and White Swimsuit',
      '白兔在蓝色游泳圈里游泳': 'White Rabbit Swimming in Blue Ring',
      '白兔和朋友在泳池里': 'White Rabbit with Friends in Pool',
      '月光花园私语': 'Moonlight Garden Whispers',
      '暮色葡萄园私语': 'Dusk Vineyard Whispers',
      '威尼斯运河暮色': 'Venice Canal Dusk',
      '的秘密花园角落': "'s Secret Garden Corner",
      '的河畔花开': "'s Riverside Blossoms",
      '的活力深渊': "'s Vitality Abyss",
      '的星光顶峰守夜': "'s Starlight Peak Vigil",
      '低语云端图书馆': 'Whispering Cloud Library',
      '湿地守望者': 'Wetland Watcher',
      '的沙漠之花': "'s Desert Bloom",
      '低语山谷光辉': 'Whispering Valley Radiance',
      '低语松林': 'Whispering Pine Forest',
      '超现实梦幻之旅': 'Surreal Dream Journey',
      '低语梦境': 'Whispering Dreams',
      '奇幻梦之林': 'Fantasy Dream Forest',
      '暮色浪潮': 'Dusk Waves',
      '暮色花园小夜曲': 'Dusk Garden Serenade',
      '热带狂欢': 'Tropical Carnival',
      '村庄光辉': 'Village Radiance',
      '暮色拥抱': 'Dusk Embrace',
      '星光之舞': 'Starlight Dance',
      '野花秋千': 'Wildflower Swing',
      '日出远足': 'Sunrise Hike',
      '繁花天堂中的独处': 'Solitude in Blooming Paradise',
      '暮色遐想': 'Dusk Reverie',
      '独自雕刻南瓜': 'Carving Pumpkin Alone',
      '果园浪漫': 'Orchard Romance',
      '冬日雪橇浪漫': 'Winter Sleigh Romance',
      '复古书店之吻': 'Vintage Bookstore Kiss',
      '威尼斯贡多拉小夜曲': 'Venice Gondola Serenade',
      '的女巫坩埚熬煮': "'s Witch Cauldron Brewing",
      '的诡异嘉年华之夜': "'s Eerie Carnival Night",
      '的南瓜马车逃亡': "'s Pumpkin Carriage Escape",
      '冬季村庄光辉': 'Winter Village Radiance',
      '拆开的喜悦': 'Unwrapping Joy',
      '星光下交换礼物': 'Exchanging Gifts Under Starlight',
      '村庄篝火团结': 'Village Bonfire Unity',
      '寺庙宁静祈祷': 'Temple Peaceful Prayer',
      '寺庙钟声': 'Temple Bells',
      '奇幻糖果嘉年华': 'Fantasy Candy Carnival',
      '奇幻蛋糕花园': 'Fantasy Cake Garden',
      '星光气球冒险': 'Starlight Balloon Adventure',
      '暮色花园浪漫': 'Dusk Garden Romance',
      '溪流相伴': 'Stream Companionship',
      '春日草地独处': 'Spring Meadow Solitude',
      '的林地餐桌': "'s Woodland Dining",
      '的河畔光辉': "'s Riverside Radiance",
      '的果园餐桌': "'s Orchard Dining",
      '棕色长耳朵站立': 'Brown Long Ears Standing',
      '动态壁纸': 'Live Wallpaper',
      '视频壁纸': 'Video Wallpaper',
      '灰色宇航员在月球上': 'Gray Astronaut on Moon',
      '彩色西装粉色蝴蝶结': 'Colorful Suit Pink Bow',
      '粉色连体衣拉小提琴': 'Pink Overalls Playing Violin',
      '粉色手持摇铃': 'Pink Holding Rattle',
      '白色宇航员泳池': 'White Astronaut Pool',
      '黑色西装泳池梯': 'Black Suit Pool Ladder',
      '冲浪者草帽': 'Surfer Hat',
      '绿色青蛙漂浮': 'Green Frog Floating',
      '绿色内胎太阳镜': 'Green Inner Tube Sunglasses',
      '橙色皮划艇': 'Orange Kayak',
      '橙色鱼筏': 'Orange Fish Raft',
      '两个在游泳池': 'Two in Swimming Pool',
      '蓝色游泳者水下': 'Blue Swimmer Underwater',
      '睡莲池': 'Water Lily Pond',
      '婴儿游泳圈': 'Baby Swim Ring',
      '和朋友偷看': 'and Friends Peeking',
      '天使弹鲁特琴': 'Angel Playing Lute',
      '黑天使蝴蝶': 'Black Angel Butterfly',
      '彩虹骷髅': 'Rainbow Skull',
      '毛茸茸的白色坐着': 'Fluffy White Sitting',
      '摇马王子': 'Rocking Horse Prince',
      '粉色聚光灯': 'Pink Spotlight',
      '粉色耳朵': 'Pink Ears',
      '游戏玩家怪物': 'Gamer Monster',
      '浮岛': 'Floating Island',
      '手电筒探险家白色服装': 'Flashlight Explorer White Outfit',
      '手电筒探险家站床边': 'Flashlight Explorer Standing Beside Bed',
      '手电筒探险家': 'Flashlight Explorer',
      '彩色爱心': 'Colorful Hearts',
      '经典暗色': 'Classic Dark',
      '和水母': 'and Jellyfish',
      '壁纸': 'Wallpaper'
    },
    es: {
      '在玫瑰园的石凳上': 'en Banco de Piedra en Jardín de Rosas',
      '在月光草甸的被子上与流星': 'en Edredón en Pradera de Luna con Meteoros',
      '在森林空地的苔藓原木上': 'en Tronco Musgoso en Claro del Bosque',
      '戴泳圈': 'con Anillo de Natación',
      '白色西装手电筒平板静态锁屏': 'Traje Blanco Linterna Tablet Pantalla Estática',
      '白色西装手电筒': 'Traje Blanco Linterna',
      '实时锁屏': 'Pantalla de Bloqueo en Vivo',
      '白色毛茸茸森林': 'Bosque Blanco Peludo',
      '水下气泡': 'Burbujas Bajo el Agua',
      '春日森林': 'Bosque de Primavera',
      '穿着红白泳衣的': 'en Traje de Baño Rojo y Blanco',
      '白兔在蓝色游泳圈里游泳': 'Conejo Blanco Nadando en Anillo Azul',
      '白兔和朋友在泳池里': 'Conejo Blanco con Amigos en Piscina',
      '月光花园私语': 'Susurros del Jardín de Luna',
      '暮色葡萄园私语': 'Susurros del Viñedo al Atardecer',
      '威尼斯运河暮色': 'Atardecer en Canal de Venecia',
      '的秘密花园角落': ' Rincón del Jardín Secreto',
      '的河畔花开': ' Flores junto al Río',
      '的活力深渊': ' Abismo de Vitalidad',
      '的星光顶峰守夜': ' Vigilia en la Cima Estrellada',
      '低语云端图书馆': 'Biblioteca de Nubes Susurrantes',
      '湿地守望者': 'Guardián del Humedal',
      '的沙漠之花': ' Flor del Desierto',
      '低语山谷光辉': 'Resplandor del Valle Susurrante',
      '低语松林': 'Pinar Susurrante',
      '超现实梦幻之旅': 'Viaje de Ensueño Surrealista',
      '低语梦境': 'Sueños Susurrantes',
      '奇幻梦之林': 'Bosque de Sueños Fantástico',
      '暮色浪潮': 'Olas del Atardecer',
      '暮色花园小夜曲': 'Serenata del Jardín al Atardecer',
      '热带狂欢': 'Carnaval Tropical',
      '村庄光辉': 'Resplandor del Pueblo',
      '暮色拥抱': 'Abrazo del Atardecer',
      '星光之舞': 'Danza de las Estrellas',
      '野花秋千': 'Columpio de Flores Silvestres',
      '日出远足': 'Caminata al Amanecer',
      '繁花天堂中的独处': 'Soledad en Paraíso Florido',
      '暮色遐想': 'Ensueños del Atardecer',
      '独自雕刻南瓜': 'Tallando Calabaza Solo',
      '果园浪漫': 'Romance en el Huerto',
      '冬日雪橇浪漫': 'Romance de Trineo Invernal',
      '复古书店之吻': 'Beso en Librería Vintage',
      '威尼斯贡多拉小夜曲': 'Serenata en Góndola Veneciana',
      '的女巫坩埚熬煮': ' Caldero de Bruja Hirviendo',
      '的诡异嘉年华之夜': ' Noche de Carnaval Extraño',
      '的南瓜马车逃亡': ' Escape en Carruaje de Calabaza',
      '冬季村庄光辉': 'Resplandor del Pueblo Invernal',
      '拆开的喜悦': 'Alegría de Desenvolver',
      '星光下交换礼物': 'Intercambio de Regalos Bajo Estrellas',
      '村庄篝火团结': 'Unidad en Hoguera del Pueblo',
      '寺庙宁静祈祷': 'Oración Pacífica en Templo',
      '寺庙钟声': 'Campanas del Templo',
      '奇幻糖果嘉年华': 'Carnaval de Dulces Fantástico',
      '奇幻蛋糕花园': 'Jardín de Pasteles Fantástico',
      '星光气球冒险': 'Aventura de Globos Estrellados',
      '暮色花园浪漫': 'Romance del Jardín al Atardecer',
      '溪流相伴': 'Compañía del Arroyo',
      '春日草地独处': 'Soledad en Pradera de Primavera',
      '的林地餐桌': ' Mesa del Bosque',
      '的河畔光辉': ' Resplandor junto al Río',
      '的果园餐桌': ' Mesa del Huerto',
      '棕色长耳朵站立': 'Orejas Largas Marrones de Pie',
      '动态壁纸': 'Fondo Animado',
      '视频壁纸': 'Fondo de Video',
      '灰色宇航员在月球上': 'Astronauta Gris en la Luna',
      '彩色西装粉色蝴蝶结': 'Traje Colorido Lazo Rosa',
      '粉色连体衣拉小提琴': 'Mono Rosa Tocando Violín',
      '粉色手持摇铃': 'Rosa Sosteniendo Sonajero',
      '白色宇航员泳池': 'Astronauta Blanco Piscina',
      '黑色西装泳池梯': 'Traje Negro Escalera Piscina',
      '冲浪者草帽': 'Sombrero de Surfista',
      '绿色青蛙漂浮': 'Rana Verde Flotando',
      '绿色内胎太阳镜': 'Tubo Verde Gafas de Sol',
      '橙色皮划艇': 'Kayak Naranja',
      '橙色鱼筏': 'Balsa de Pez Naranja',
      '两个在游泳池': 'Dos en Piscina',
      '蓝色游泳者水下': 'Nadador Azul Bajo Agua',
      '睡莲池': 'Estanque de Nenúfares',
      '婴儿游泳圈': 'Flotador de Bebé',
      '和朋友偷看': 'y Amigos Espiando',
      '天使弹鲁特琴': 'Ángel Tocando Laúd',
      '黑天使蝴蝶': 'Ángel Negro Mariposa',
      '彩虹骷髅': 'Calavera Arcoíris',
      '毛茸茸的白色坐着': 'Peludo Blanco Sentado',
      '摇马王子': 'Príncipe del Caballo Mecedor',
      '粉色聚光灯': 'Foco Rosa',
      '粉色耳朵': 'Orejas Rosas',
      '游戏玩家怪物': 'Monstruo Jugador',
      '浮岛': 'Isla Flotante',
      '手电筒探险家白色服装': 'Explorador Linterna Traje Blanco',
      '手电筒探险家站床边': 'Explorador Linterna Junto a Cama',
      '手电筒探险家': 'Explorador con Linterna',
      '彩色爱心': 'Corazones Coloridos',
      '经典暗色': 'Clásico Oscuro',
      '和水母': 'y Medusa',
      '壁纸': 'Fondo de Pantalla'
    }
  };

  // 智能翻译标题
  const translateTitle = useCallback((title) => {
    if (!title || typeof title !== 'string') return title;

    try {
      // 如果当前语言是中文，检查是否有对应的直接翻译
      if (currentLanguage === 'zh') {
        return title; // 中文标题保持原样
      }

      // 获取当前语言的词汇映射
      const vocabMap = vocabularyMap[currentLanguage] || {};
      
      let translatedTitle = title;

      // 逐词翻译
      Object.keys(vocabMap).forEach(originalPhrase => {
        if (translatedTitle.includes(originalPhrase)) {
          translatedTitle = translatedTitle.replace(
            new RegExp(originalPhrase.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'),
            vocabMap[originalPhrase]
          );
        }
      });

      return translatedTitle;
    } catch (error) {
      console.error('Title translation error:', error);
      return title;
    }
  }, [currentLanguage]);

  return {
    translateTitle,
    currentLanguage
  };
}; 